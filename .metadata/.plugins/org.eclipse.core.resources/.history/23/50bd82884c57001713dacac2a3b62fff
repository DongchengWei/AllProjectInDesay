/**
 * @Author：Tonsen
 * @Email ：Dongcheng.Wei@desay-svautomotive.com
 * @Date  ：2017-06-22
 */
package com.action;

import com.android.uiautomator.core.UiDevice;
import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;
import com.otherutils.Utils;
import com.pageutil.HomePage;
import com.pageutil.MediaPage;
import com.pageutil.UpdatePage;
import com.runutils.RunTestCase;

import android.os.RemoteException;

/** 
* @author 作者 E-mail: Dongcheng.Wei@desay-svautomotive.com
* @version 创建时间：2017年6月22日 下午9:01:28 
* 类说明 :
*/
/**
 * @author uidq0460
 *
 */
public class IntoFm extends UiAutomatorTestCase{

	/**
	 * 
	 * @param args
	 * @Date 2017-06-22
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		RunTestCase runTestCase=new RunTestCase("AutoTest",  
				 "com.action.CheckFirstupToFm", "", "3");  
		runTestCase.setDebug(false);  
		runTestCase.runUiautomator(); 
	}
	
	public void testIntoFm() {
		try {
			UiDevice.getInstance().wakeUp();
			Utils.stopRunningWatcher();
			
			assertEquals(true, actionIntoFm());
			
			UiDevice.getInstance().removeWatcher("stopRunning"); //移除监视器
		} catch (RemoteException e) {
			e.printStackTrace();
		}
	}

	/**
	 * 
	 * @return
	 * @Date 2017-06-22
	 */
	public boolean actionIntoFm() {
		boolean isOk = false;
		
		HomePage homePage = new HomePage();
		MediaPage mediaPage = new MediaPage();
		UpdatePage updatePage = new UpdatePage();
		
		try {
			Utils.logPrint("Wait for confirm button into system...");
			if (updatePage.waitForConfirmBtnExists(60000)) {
				Utils.logPrint("Confirm button comeout, into system...");
				updatePage.clickConfirmIntoSys();
				Utils.logPrint("into Fm");
				homePage.goBackHome();
				if (homePage.intoMultimedia()) {
					if (mediaPage.intoFmAmPage()) {
						isOk = true;
					}
				}
				
			}
		} catch (UiObjectNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		return isOk;
	}

}
